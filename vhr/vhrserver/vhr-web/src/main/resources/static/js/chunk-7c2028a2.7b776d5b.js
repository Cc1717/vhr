(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c2028a2"],{5865:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" 员工资料 ")])},i=[],n={name:"PerEmp"},r=n,s=a("2877"),o=Object(s["a"])(r,l,i,!1,null,"3547bc42",null);t["default"]=o.exports},"5a4a":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:"","prefix-icon":"el-icon-search",disabled:e.nameDisabled,placeholder:"通过员工姓名搜索..."},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.searchAdjustSalary.name,callback:function(t){e.$set(e.searchAdjustSalary,"name",t)},expression:"searchAdjustSalary.name"}}),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{clearable:"","prefix-icon":"el-icon-search",disabled:e.workIDDisabled,placeholder:"通过员工工号搜索..."},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.searchAdjustSalary.workID,callback:function(t){e.$set(e.searchAdjustSalary,"workID",t)},expression:"searchAdjustSalary.workID"}}),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"调薪日期","end-placeholder":"调薪日期"},model:{value:e.searchAdjustSalary.timeScope,callback:function(t){e.$set(e.searchAdjustSalary,"timeScope",t)},expression:"searchAdjustSalary.timeScope"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.doSearch}},[e._v("搜索 ")])],1),a("div",[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.openAddDialog}},[e._v("添加调薪记录")])],1)]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"正在获取数据...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},data:e.adjustSalaries,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"employee.name",label:"员工姓名",width:"120",fixed:""}}),a("el-table-column",{attrs:{prop:"employee.department.name",label:"所属部门",width:"120"}}),a("el-table-column",{attrs:{prop:"employee.workID",label:"员工工号",width:"120"}}),a("el-table-column",{attrs:{label:"调薪类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0==t.row.type?"降薪":"加薪")+" ")]}}])}),a("el-table-column",{attrs:{prop:"content",label:"调薪内容",width:"80"}}),a("el-table-column",{attrs:{prop:"beforeSalary",label:"调前薪资",width:"80"}}),a("el-table-column",{attrs:{prop:"afterSalary",label:"调后薪资",width:"80"}}),a("el-table-column",{attrs:{prop:"asDate",label:"调薪日期",width:"120"}}),a("el-table-column",{attrs:{prop:"effectiveDate",label:"生效日期",width:"120"}}),a("el-table-column",{attrs:{prop:"reason",label:"调薪原因",width:"160"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"160"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.openEditDialog(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteAdjustSalary(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[a("el-button",{attrs:{disabled:"",type:"danger",icon:"el-icon-delete"}},[e._v("批量删除")]),a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total,"current-page":e.page,"page-size":e.size},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"update:pageSize":function(t){e.size=t},"update:page-size":function(t){e.size=t},"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"42%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"adjustSalaryForm",attrs:{rules:e.rules,model:e.adjustSalary}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"empName"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("员工姓名")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:""},model:{value:e.adjustSalary.empName,callback:function(t){e.$set(e.adjustSalary,"empName",t)},expression:"adjustSalary.empName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"departmentName"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("所属部门")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:""},model:{value:e.adjustSalary.departmentName,callback:function(t){e.$set(e.adjustSalary,"departmentName",t)},expression:"adjustSalary.departmentName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"workID"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("员工工号")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:null!=e.adjustSalary.id,placeholder:"请输入员工工号..."},on:{blur:e.getEmployee},model:{value:e.adjustSalary.workID,callback:function(t){e.$set(e.adjustSalary,"workID",t)},expression:"adjustSalary.workID"}})],1)],1),e.adjustSalary.empName&&e.adjustSalary.departmentName?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"content"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("调薪内容")]),a("el-select",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:null!=e.adjustSalary.id,placeholder:"请选择调薪内容..."},on:{change:e.getBeforeSalary},model:{value:e.adjustSalary.content,callback:function(t){e.$set(e.adjustSalary,"content",t)},expression:"adjustSalary.content"}},[a("el-option",{attrs:{label:"基本工资",value:"基本工资"}}),a("el-option",{attrs:{label:"奖金",value:"奖金"}}),a("el-option",{attrs:{label:"午餐补助",value:"午餐补助"}}),a("el-option",{attrs:{label:"交通补助",value:"交通补助"}})],1)],1)],1)]:e._e()],2),e.adjustSalary.content?[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"asDate"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("调薪日期")]),a("el-date-picker",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:"",type:"date"},model:{value:e.adjustSalary.asDate,callback:function(t){e.$set(e.adjustSalary,"asDate",t)},expression:"adjustSalary.asDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"type"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("调薪类型")]),a("el-select",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:e.effective,placeholder:"请选择调薪类型..."},model:{value:e.adjustSalary.type,callback:function(t){e.$set(e.adjustSalary,"type",t)},expression:"adjustSalary.type"}},[a("el-option",{attrs:{label:"加薪",value:1}}),a("el-option",{attrs:{label:"降薪",value:0}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"beforeSalary"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("调前薪资")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:""},model:{value:e.adjustSalary.beforeSalary,callback:function(t){e.$set(e.adjustSalary,"beforeSalary",t)},expression:"adjustSalary.beforeSalary"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"afterSalary"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("调后薪资")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:e.effective,placeholder:"请输入调后薪资..."},model:{value:e.adjustSalary.afterSalary,callback:function(t){e.$set(e.adjustSalary,"afterSalary",t)},expression:"adjustSalary.afterSalary"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"effectiveDate"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("生效日期")]),a("el-date-picker",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:e.effective,"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择生效日期..."},model:{value:e.adjustSalary.effectiveDate,callback:function(t){e.$set(e.adjustSalary,"effectiveDate",t)},expression:"adjustSalary.effectiveDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"reason"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("调薪原因")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请输入调薪原因..."},model:{value:e.adjustSalary.reason,callback:function(t){e.$set(e.adjustSalary,"reason",t)},expression:"adjustSalary.reason"}})],1)],1)],1),a("el-form-item",{attrs:{prop:"remark"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("备注")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请输入备注..."},model:{value:e.adjustSalary.remark,callback:function(t){e.$set(e.adjustSalary,"remark",t)},expression:"adjustSalary.remark"}})],1)]:e._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},i=[],n=(a("b0c0"),{name:"PerSalary",computed:{nameDisabled:function(){return""!=this.searchAdjustSalary.workID},workIDDisabled:function(){return""!=this.searchAdjustSalary.name}},data:function(){var e=this,t=function(t,a,l){0==e.adjustSalary.type&&e.adjustSalary.beforeSalary<=a||1==e.adjustSalary.type&&e.adjustSalary.beforeSalary>=a?l(new Error("请输入合适的调后薪资!")):l()},a=function(t,a,l){e.adjustSalary.asDate>a?l(new Error("请选择合适的生效日期!")):l()};return{loading:!1,adjustSalaries:[],dialogVisible:!1,dialogTitle:"",adjustSalary:null,searchAdjustSalary:{name:"",workID:"",timeScope:null},effective:!1,rules:{empName:[{required:!0,message:"请输入正确的员工工号",trigger:"change"}],departmentName:[{required:!0,message:"请输入正确的员工工号",trigger:"change"}],workID:[{required:!0,message:"请输入员工工号",trigger:"blur"}],content:[{required:!0,message:"请选择调薪内容",trigger:"change"}],beforeSalary:[{required:!0,message:"请检查该员工账套或调薪记录",trigger:"change"}],type:[{required:!0,message:"请选择调薪类型",trigger:"change"}],afterSalary:[{required:!0,message:"请输入调后薪资",trigger:"blur"},{validator:t,trigger:"blur"}],effectiveDate:[{required:!0,message:"请选择生效日期",trigger:"change"},{validator:a,trigger:"change"}],reason:[{required:!0,message:"请输入调薪原因",trigger:"blur"}]},page:1,size:10,total:0}},mounted:function(){this.initAdjustSalaries(),this.initAdjustSalary()},methods:{doSearch:function(){this.page=1,this.size=10,this.initAdjustSalaries()},initAdjustSalaries:function(){var e=this;this.loading=!0;var t="";this.searchAdjustSalary.name&&(t+="&name="+this.searchAdjustSalary.name),this.searchAdjustSalary.workID&&(t+="&workID="+this.searchAdjustSalary.workID),this.searchAdjustSalary.timeScope&&(t+="&timeScope="+this.searchAdjustSalary.timeScope),this.getRequest("/personnel/salary/?page="+this.page+"&size="+this.size+t).then((function(t){e.loading=!1,t&&(e.total=t.total,e.adjustSalaries=t.data)}))},initAdjustSalary:function(){this.adjustSalary={eid:null,empName:null,departmentName:null,workID:null,content:null,type:null,beforeSalary:null,afterSalary:null,asDate:this.dateFormat(new Date),effectiveDate:null,reason:null,remark:null}},deleteAdjustSalary:function(e){var t=this;this.$confirm("此操作将永久删除调薪记录【"+e.employee.name+"-"+e.employee.department.name+"-"+e.employee.workID+"-"+e.content+"】, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.dateFormat(new Date);e.effectiveDate<a?t.$message.error("该调薪记录已生效，无法删除"):t.deleteRequest("/personnel/salary/"+e.id).then((function(e){e&&t.initAdjustSalaries()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},openAddDialog:function(){this.initAdjustSalary(),this.dialogTitle="添加调薪记录",this.dialogVisible=!0},openEditDialog:function(e){this.adjustSalary=Object.assign({},e),this.adjustSalary.empName=e.employee.name,this.adjustSalary.departmentName=e.employee.department.name,this.adjustSalary.workID=e.employee.workID;var t=this.dateFormat(new Date);this.adjustSalary.effectiveDate<t?(this.effective=!0,this.dialogTitle="修改调薪记录-已生效"):(this.effective=!1,this.dialogTitle="修改调薪记录-未生效"),this.dialogVisible=!0},submitForm:function(){var e=this;this.$refs.adjustSalaryForm.validate((function(t){t&&(e.$message.success("表单校验通过"),e.adjustSalary.id?e.putRequest("/personnel/salary/",e.adjustSalary).then((function(t){t&&(e.initAdjustSalaries(),e.dialogVisible=!1)})):e.postRequest("/personnel/salary/",e.adjustSalary).then((function(t){t&&(e.initAdjustSalaries(),e.dialogVisible=!1)})))}))},getEmployee:function(){var e=this,t=this.adjustSalary.workID;this.initAdjustSalary(),this.adjustSalary.workID=t,this.adjustSalary.workID&&this.getRequest("/personnel/salary/employee?workID="+this.adjustSalary.workID).then((function(t){t&&(e.adjustSalary.eid=t.id,e.adjustSalary.empName=t.name,e.adjustSalary.departmentName=t.department.name)}))},getBeforeSalary:function(){var e=this;this.getRequest("/personnel/salary/beforeSalary?eid="+this.adjustSalary.eid+"&content="+this.adjustSalary.content).then((function(t){e.adjustSalary.beforeSalary=t?t.object:null}))},currentChange:function(){this.initAdjustSalaries()},sizeChange:function(){this.initAdjustSalaries()}}}),r=n,s=a("2877"),o=Object(s["a"])(r,l,i,!1,null,"8b45c276",null);t["default"]=o.exports},"83ed":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{clearable:"",disabled:e.nameDisabled,"prefix-icon":"el-icon-search",placeholder:"通过员工姓名搜索..."},model:{value:e.empName,callback:function(t){e.empName=t},expression:"empName"}}),a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{clearable:"",disabled:e.workIDDisabled,"prefix-icon":"el-icon-search",placeholder:"通过员工工号搜索..."},model:{value:e.empWorkID,callback:function(t){e.empWorkID=t},expression:"empWorkID"}}),a("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"培训时间","end-placeholder":"培训时间"},model:{value:e.datetime,callback:function(t){e.datetime=t},expression:"datetime"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.doSearch}},[e._v("搜索")])],1),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"}},[e._v("添加培训记录")])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"正在获取数据...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},data:e.trains,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"trainContent",label:"培训内容",width:"250"}}),a("el-table-column",{attrs:{prop:"remark",label:"培训备注",width:"250"}}),a("el-table-column",{attrs:{prop:"trainDate",label:"培训时间",width:"200"}}),a("el-table-column",{attrs:{prop:"employee.name",label:"员工姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"employee.workID",label:"员工工号",width:"120"}}),a("el-table-column",{attrs:{prop:"employee.department.name",label:"所属部门",width:"120"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteTrain(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[a("div",[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",disabled:0==e.multipleSelection.length},on:{click:e.multipleDelete}},[e._v("批量删除 ")]),a("el-upload",{staticStyle:{display:"inline-flex","margin-right":"10px"},attrs:{"show-file-list":!1,"before-upload":e.beforeUpload,"on-success":e.onSuccess,"on-error":e.onError,disabled:e.importDataDisabled,action:"/personnel/train/import"}},[a("el-button",{attrs:{type:"success",icon:e.importDataBtnIcon}},[e._v(e._s(e.importDataBtnText))])],1),a("el-button",{attrs:{type:"success",disabled:e.importDataDisabled,icon:"el-icon-download"},on:{click:e.exportData}},[e._v(" 导出数据 ")])],1),a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total,"current-page":e.page,"page-size":e.size},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"update:pageSize":function(t){e.size=t},"update:page-size":function(t){e.size=t},"current-change":e.currentChange,"size-change":e.sizeChange}})],1)])},i=[],n=(a("4160"),a("b0c0"),a("159b"),{name:"PerTrain",data:function(){return{importDataBtnIcon:"el-icon-upload2",importDataBtnText:"导入数据",importDataDisabled:!1,trains:[],page:1,size:10,total:0,loading:!1,datetime:null,empName:"",empWorkID:"",multipleSelection:[]}},computed:{nameDisabled:function(){return""!=this.empWorkID},workIDDisabled:function(){return""!=this.empName}},mounted:function(){this.initTrains()},methods:{beforeUpload:function(){this.importDataBtnIcon="el-icon-loading",this.importDataBtnText="正在导入",this.importDataDisabled=!0},onSuccess:function(){this.importDataBtnIcon="el-icon-upload2",this.importDataBtnText="导入数据",this.importDataDisabled=!1,this.initTrains()},onError:function(){this.importDataBtnIcon="el-icon-upload2",this.importDataBtnText="导入数据",this.importDataDisabled=!1},exportData:function(){window.open("/personnel/train/export","_parent")},initTrains:function(){var e=this;this.loading=!0;var t="";this.empName&&(t+="&name="+this.empName),this.empWorkID&&(t+="&workID="+this.empWorkID),this.datetime&&(t+="&timeScope="+this.datetime),this.getRequest("/personnel/train/?page="+this.page+"&size="+this.size+t).then((function(t){e.loading=!1,t&&(e.trains=t.data,e.total=t.total)}))},doSearch:function(){this.page=1,this.size=10,this.initTrains()},handleSelectionChange:function(e){this.multipleSelection=e},multipleDelete:function(){var e=this;this.$confirm("此操作将永久删除【"+this.multipleSelection.length+"】条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="?";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.deleteRequest("/personnel/train/"+t).then((function(t){t&&e.initTrains()}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))},deleteTrain:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.employee.name+"】的培训记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/personnel/train/"+e.id).then((function(e){e&&t.initTrains()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},currentChange:function(){this.initTrains()},sizeChange:function(){this.initTrains()}}}),r=n,s=a("2877"),o=Object(s["a"])(r,l,i,!1,null,"157aaac0",null);t["default"]=o.exports},cfbb:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v(" 员工调动 ")])},i=[],n={name:"PerMv"},r=n,s=a("2877"),o=Object(s["a"])(r,l,i,!1,null,"6cb496b0",null);t["default"]=o.exports},d9ac:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{clearable:"",disabled:e.nameDisabled,"prefix-icon":"el-icon-search",placeholder:"通过员工姓名搜索..."},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.empName,callback:function(t){e.empName=t},expression:"empName"}}),a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{clearable:"",disabled:e.workIDDisabled,"prefix-icon":"el-icon-search",placeholder:"通过员工工号搜索..."},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.empWorkID,callback:function(t){e.empWorkID=t},expression:"empWorkID"}}),a("el-date-picker",{staticStyle:{"margin-right":"10px",width:"300px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"奖惩时间","end-placeholder":"奖惩时间"},model:{value:e.ecDateScope,callback:function(t){e.ecDateScope=t},expression:"ecDateScope"}}),a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.doSearch}},[e._v("搜索")])],1),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.openAddDialog}},[e._v("添加奖惩记录")])],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"正在获取数据...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},data:e.ecs,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"employee.name",label:"员工姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"employee.workID",label:"员工工号",width:"120"}}),a("el-table-column",{attrs:{prop:"employee.department.name",label:"所属部门",width:"120"}}),a("el-table-column",{attrs:{prop:"rewardPunishment.name",label:"奖惩名称",width:"200"}}),a("el-table-column",{attrs:{label:"奖惩类别",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0==t.row.rewardPunishment.type?"惩罚":"奖励")+" ")]}}])}),a("el-table-column",{attrs:{label:"奖惩方式",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0==t.row.rewardPunishment.way?"数额":"积分")+" ")]}}])}),a("el-table-column",{attrs:{prop:"rewardPunishment.amount",label:"奖惩数额",width:"80"}}),a("el-table-column",{attrs:{prop:"rewardPunishment.point",label:"奖惩积分",width:"80"}}),a("el-table-column",{attrs:{prop:"ecDate",label:"奖惩时间",width:"120"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"120"}}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.openEditDialog(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteEc(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"10px"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",disabled:""}},[e._v("批量删除")]),a("div",[a("el-tag",{attrs:{size:"normal"}},[e._v("记录统计日期")]),a("el-input",{staticStyle:{"margin-left":"10px",width:"80px"},attrs:{"prefix-icon":"el-icon-time",disabled:"",value:e.closingDate}})],1),a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total,"current-page":e.page,"page-size":e.size},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"update:pageSize":function(t){e.size=t},"update:page-size":function(t){e.size=t},"current-change":e.currentChange,"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"42%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ecForm",attrs:{rules:e.rules,model:e.ec}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"empName"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("员工姓名")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:""},model:{value:e.ec.empName,callback:function(t){e.$set(e.ec,"empName",t)},expression:"ec.empName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"departmentName"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("所属部门")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:""},model:{value:e.ec.departmentName,callback:function(t){e.$set(e.ec,"departmentName",t)},expression:"ec.departmentName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"workID"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("员工工号")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{disabled:null!=e.ec.id,placeholder:"请输入员工工号..."},on:{blur:e.getEmployee},model:{value:e.ec.workID,callback:function(t){e.$set(e.ec,"workID",t)},expression:"ec.workID"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"rpId"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("奖惩规则")]),a("el-select",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请选择奖惩规则..."},model:{value:e.ec.rpId,callback:function(t){e.$set(e.ec,"rpId",t)},expression:"ec.rpId"}},e._l(e.rps,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("el-row",[null!=e.ec.id?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"ecDate"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("奖惩时间")]),a("el-date-picker",{staticStyle:{"margin-left":"10px",width:"180px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择奖惩时间..."},model:{value:e.ec.ecDate,callback:function(t){e.$set(e.ec,"ecDate",t)},expression:"ec.ecDate"}})],1)],1)]:e._e(),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"remark"}},[a("el-tag",{attrs:{size:"normal"}},[e._v("备注")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请输入备注..."},model:{value:e.ec.remark,callback:function(t){e.$set(e.ec,"remark",t)},expression:"ec.remark"}})],1)],1)],2)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},i=[],n=(a("b0c0"),{name:"PerEc",data:function(){return{dialogTitle:"",closingDate:null,dialogVisible:!1,ecs:[],ec:null,page:1,size:10,total:0,loading:!1,ecDateScope:null,empName:"",empWorkID:"",rules:{empName:[{required:!0,message:"请输入正确的员工工号",trigger:"change"}],departmentName:[{required:!0,message:"请输入正确的员工工号",trigger:"change"}],workID:[{required:!0,message:"请输入员工工号",trigger:"blur"}],rpId:[{required:!0,message:"请选择奖惩规则",trigger:"change"}],ecDate:[{required:!0,message:"请选择奖惩时间",trigger:"change"}]},rps:[]}},computed:{nameDisabled:function(){return""!=this.empWorkID},workIDDisabled:function(){return""!=this.empName}},mounted:function(){var e=this;this.initEcs(),this.initEc(),this.getRequest("/system/config/closingDate").then((function(t){t&&(e.closingDate=t)}))},methods:{submitForm:function(){var e=this;this.$refs.ecForm.validate((function(t){t&&(e.ec.id?e.putRequest("/personnel/ec/",e.ec).then((function(t){t&&(e.initEcs(),e.dialogVisible=!1)})):e.getRequest("/personnel/ec/record?eid="+e.ec.eid+"&rpId="+e.ec.rpId).then((function(t){t?e.$confirm("该员工在同一天内已有相同记录,是否继续添加?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.addEc()})).catch((function(){e.$message({type:"info",message:"已取消操作"})})):e.addEc()})))}))},openAddDialog:function(){this.getRewardPunishment(),this.dialogTitle="添加奖惩记录",this.dialogVisible=!0,this.initEc()},openEditDialog:function(e){this.getRewardPunishment(),this.dialogTitle="修改奖惩记录",this.dialogVisible=!0,Object.assign(this.ec,e),this.ec.workID=e.employee.workID,this.ec.empName=e.employee.name,this.ec.departmentName=e.employee.department.name},addEc:function(){var e=this;this.postRequest("/personnel/ec/",this.ec).then((function(t){t&&(e.initEcs(),e.dialogVisible=!1)}))},initEc:function(){this.ec={eid:null,empName:null,departmentName:null,workID:null,rpId:null,ecDate:null,remark:null}},getRewardPunishment:function(){var e=this;this.getRequest("/personnel/ec/rewardPunishment").then((function(t){t&&(e.rps=t)}))},getEmployee:function(){var e=this,t=this.ec.workID;this.initEc(),this.ec.workID=t,this.ec.workID&&this.getRequest("/personnel/ec/employee?workID="+this.ec.workID).then((function(t){t&&(e.ec.eid=t.id,e.ec.empName=t.name,e.ec.departmentName=t.department.name)}))},initEcs:function(){var e=this;this.loading=!0;var t="";this.empName&&(t+="&name="+this.empName),this.empWorkID&&(t+="&workID="+this.empWorkID),this.ecDateScope&&(t+="&timeScope="+this.ecDateScope),this.getRequest("/personnel/ec/?page="+this.page+"&size="+this.size+t).then((function(t){e.loading=!1,t&&(e.ecs=t.data,e.total=t.total)}))},doSearch:function(){this.page=1,this.size=10,this.initEcs()},handleSelectionChange:function(e){this.multipleSelection=e},deleteEc:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.employee.name+"】的奖惩记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/personnel/ec/",e).then((function(e){e&&t.initEcs()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},currentChange:function(){this.initEcs()},sizeChange:function(){this.initEcs()}}}),r=n,s=a("2877"),o=Object(s["a"])(r,l,i,!1,null,"119a7dc2",null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-7c2028a2.7b776d5b.js.map