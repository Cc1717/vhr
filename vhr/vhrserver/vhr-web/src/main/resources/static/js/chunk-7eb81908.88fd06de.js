(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eb81908"],{"1fe7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 系统管理 ")])},l=[],a={name:"SysCfg"},s=a,o=n("2877"),r=Object(o["a"])(s,i,l,!1,null,"23cce413",null);t["default"]=r.exports},2587:function(e,t,n){"use strict";var i=n("b244"),l=n.n(i);l.a},"418a":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"hrSearch"},[n("el-input",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"通过用户名搜索用户..."},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.hrName,callback:function(t){e.hrName=t},expression:"hrName"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.doSearch}},[e._v("搜索")])],1),n("div",{staticClass:"hrCards"},e._l(e.hrs,(function(t,i){return n("el-card",{key:i,staticClass:"hrCard"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(t.name))]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#ff0000"},attrs:{type:"text",icon:"el-icon-delete",size:"normal"},on:{click:function(n){return e.deleteHr(t)}}})],1),n("div",[n("div",{staticStyle:{display:"flex","justify-content":"center"}},[n("img",{attrs:{src:t.userface,alt:t.name+"头像",title:t.name}})]),n("div",{staticClass:"hrCard-text"},[n("div",[e._v("用户名："+e._s(t.name))]),n("div",[e._v("手机号码："+e._s(t.phone))]),n("div",[e._v("电话号码："+e._s(t.telephone))]),n("div",[e._v("地址："+e._s(t.address))]),n("div",[e._v("用户状态： "),n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){return e.enabledChange(t)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"hr.enabled"}})],1),n("div",[e._v(" 用户角色： "),e._l(t.roles,(function(t,i){return n("el-tag",{key:i,staticStyle:{"margin-right":"5px","margin-bottom":"5px"},attrs:{type:"success"}},[e._v(e._s(t.nameZh)+" ")])})),n("el-popover",{attrs:{placement:"right",title:"角色列表",width:"200",trigger:"click"},on:{show:function(n){return e.showPop(t)},hide:function(n){return e.hidePop(t)}}},[n("el-select",{attrs:{placeholder:"请选择",multiple:""},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}},e._l(e.allRoles,(function(e,t){return n("el-option",{key:t,attrs:{label:e.nameZh,value:e.id}})})),1),n("el-button",{attrs:{slot:"reference",icon:"el-icon-edit",type:"text"},slot:"reference"})],1)],2),n("div",[e._v("备注："+e._s(t.remark))])])])])})),1)])},l=[],a=(n("4160"),n("b0c0"),n("159b"),{name:"SysHr",data:function(){return{hrName:"",hrs:[],allRoles:[],selectedRoles:[]}},mounted:function(){this.initHrs()},methods:{deleteHr:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.name+"】用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/hr/"+e.id).then((function(e){e&&t.initHrs()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},doSearch:function(){this.initHrs()},showPop:function(e){var t=this;this.initAllRoles(),this.selectedRoles=[],e.roles.forEach((function(e){t.selectedRoles.push(e.id)}))},hidePop:function(e){var t=this,n=!0;if(this.selectedRoles.length==e.roles.length){var i,l;for(i=0;i<this.selectedRoles.length;i++){for(l=0;l<e.roles.length;l++)if(this.selectedRoles[i]==e.roles[l].id)break;if(l==e.roles.length)break}i==this.selectedRoles.length&&(n=!1,this.$message.info("角色没有改变"))}if(n){var a="";this.selectedRoles.forEach((function(e){a+="&rids="+e})),this.putRequest("/system/hr/hrRole?hrid="+e.id+a).then((function(e){e&&t.initHrs()}))}},initAllRoles:function(){var e=this;this.getRequest("/system/hr/roles").then((function(t){t&&(e.allRoles=t)}))},initHrs:function(){var e=this;this.getRequest("/system/hr/?hrName="+this.hrName).then((function(t){t&&(e.hrs=t)}))},enabledChange:function(e){var t=this;this.putRequest("/system/hr/",e).then((function(e){e&&t.initHrs()}))}}}),s=a,o=(n("a73a"),n("2877")),r=Object(o["a"])(s,i,l,!1,null,null,null);t["default"]=r.exports},"465a":function(e,t,n){},"548a":function(e,t,n){},8608:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 初始化数据库 ")])},l=[],a={name:"SysInit"},s=a,o=n("2877"),r=Object(o["a"])(s,i,l,!1,null,"5fd3d133",null);t["default"]=r.exports},"864e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 操作日志管理 ")])},l=[],a={name:"SysLog"},s=a,o=n("2877"),r=Object(o["a"])(s,i,l,!1,null,"160d2594",null);t["default"]=r.exports},"8d67":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"部门管理",name:"depmanager"}},[n("DepManager")],1),n("el-tab-pane",{attrs:{label:"职位管理",name:"posmanager"}},[n("PosManager")],1),n("el-tab-pane",{attrs:{label:"职称管理",name:"joblevelmanager"}},[n("JobLevelManager")],1),n("el-tab-pane",{attrs:{label:"奖惩规则",name:"rewardpunishmentmanager"}},[n("RewardPunishmentManager")],1),n("el-tab-pane",{attrs:{label:"权限组",name:"permissmanager"}},[n("PermissManager")],1)],1)],1)},l=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-input",{staticStyle:{width:"300px","margin-bottom":"10px"},attrs:{placeholder:"请输入部门名称进行搜索...","prefix-icon":"el-icon-search"},model:{value:e.depName,callback:function(t){e.depName=t},expression:"depName"}}),n("el-tree",{ref:"tree",staticStyle:{width:"550px"},attrs:{data:e.deps,props:e.defaultProps,"filter-node-method":e.filterNode,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return n("span",{staticClass:"custom-tree-node",staticStyle:{display:"flex","justify-content":"space-between",width:"100%"}},[n("span",[e._v(e._s(i.label))]),n("span",[n("el-button",{staticClass:"depBtn",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.openAddDialog(l)}}},[e._v(" 添加部门 ")]),n("el-button",{staticClass:"depBtn",attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteDep(l)}}},[e._v(" 删除部门 ")])],1)])}}])}),n("el-dialog",{attrs:{title:"添加部门",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("el-tag",[e._v("父部门")]),n("el-input",{staticStyle:{width:"200px","margin-left":"8px"},attrs:{disabled:""},model:{value:e.pname,callback:function(t){e.pname=t},expression:"pname"}})],1),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tag",[e._v("子部门")]),n("el-input",{staticStyle:{width:"200px","margin-left":"8px"},attrs:{placeholder:"请输入部门名称..."},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addDepartment(t)}},model:{value:e.dep.name,callback:function(t){e.$set(e.dep,"name",t)},expression:"dep.name"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addDepartment}},[e._v("确 定")])],1)])],1)},s=[],o=(n("99af"),n("4de4"),n("c975"),n("a434"),n("b0c0"),{name:"DepManager",data:function(){return{depName:"",deps:[],defaultProps:{children:"children",label:"name"},dialogVisible:!1,dep:{name:"",parentId:-1},pname:""}},mounted:function(){this.initDeps()},watch:{depName:function(e){this.$refs.tree.filter(e)}},methods:{deleteDep:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.name+"】部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/department/"+e.id).then((function(n){n&&t.afterDelete(t.deps,e.id)}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},afterDelete:function(e,t){for(var n=0;n<e.length;n++){if(e[n].id==t)return void e.splice(n,1);this.afterDelete(e[n].children,t)}},openAddDialog:function(e){this.pname=e.name,this.dep.parentId=e.id,this.dialogVisible=!0},addDepartment:function(){var e=this;this.dep.name?this.postRequest("/system/basic/department/",this.dep).then((function(t){t&&(e.dep.name="",e.dialogVisible=!1,e.afterAdd(e.deps,t.object))})):this.$message.error("所添加的子部门名称不能为空")},afterAdd:function(e,t){for(var n=0;n<e.length;n++){if(e[n].id==t.parentId)return void(e[n].children=e[n].children.concat(t));this.afterAdd(e[n].children,t)}},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},initDeps:function(){var e=this;this.getRequest("/system/basic/department/").then((function(t){t&&(e.deps=t)}))}}}),r=o,c=(n("2587"),n("2877")),u=Object(c["a"])(r,a,s,!1,null,null,null),d=u.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticClass:"addPosInput",attrs:{size:"small",placeholder:"添加职位...","prefix-icon":"el-icon-plus"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.positionAdd(t)}},model:{value:e.pos.name,callback:function(t){e.$set(e.pos,"name",t)},expression:"pos.name"}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.positionAdd}},[e._v("添加")])],1),n("div",{staticClass:"posManagerMain"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"70%"},attrs:{"element-loading-text":"正在获取数据...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},data:e.positions,stripe:"",border:"",size:"small"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"职位名称",width:"140"}}),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间",width:"180"}}),n("el-table-column",{attrs:{label:"是否启用",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enabled?n("el-tag",{attrs:{type:"success",size:"small"}},[e._v("已启用")]):n("el-tag",{attrs:{type:"danger",size:"small"}},[e._v("未启用")])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.openEditDialog(t.row)}}},[e._v("编辑 ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.positionDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{icon:"el-icon-delete",type:"danger",size:"small",disabled:0==e.multipleSelection.length},on:{click:e.multipleDelete}},[e._v(" 批量删除 ")])],1),n("el-dialog",{attrs:{title:"修改职位",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("el-tag",[e._v("编号")]),n("el-input",{staticClass:"updatePosInput2",attrs:{size:"small",disabled:""},model:{value:e.updatePos.id,callback:function(t){e.$set(e.updatePos,"id",t)},expression:"updatePos.id"}})],1),n("div",{staticStyle:{"margin-top":"15px"}},[n("el-tag",[e._v("职位名称")]),n("el-input",{staticClass:"updatePosInput",attrs:{size:"small"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.positionEdit(t)}},model:{value:e.updatePos.name,callback:function(t){e.$set(e.updatePos,"name",t)},expression:"updatePos.name"}})],1),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tag",[e._v("是否启用")]),n("el-switch",{staticStyle:{"margin-left":"8px"},model:{value:e.updatePos.enabled,callback:function(t){e.$set(e.updatePos,"enabled",t)},expression:"updatePos.enabled"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.positionEdit}},[e._v("确 定")])],1)])],1)},m=[],h=(n("4160"),n("159b"),{name:"PosManager",data:function(){return{loading:!1,pos:{name:""},updatePos:{id:"",name:"",enabled:!1},positions:[],dialogVisible:!1,multipleSelection:[]}},mounted:function(){this.initPositions()},methods:{multipleDelete:function(){var e=this;this.$confirm("此操作将永久删除【"+this.multipleSelection.length+"】条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="?";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.deleteRequest("/system/basic/pos/"+t).then((function(t){t&&e.initPositions()}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))},handleSelectionChange:function(e){this.multipleSelection=e},openEditDialog:function(e){Object.assign(this.updatePos,e),this.dialogVisible=!0},initPositions:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/pos/").then((function(t){e.loading=!1,t&&(e.positions=t)}))},positionAdd:function(){var e=this;this.pos.name?this.postRequest("/system/basic/pos/",this.pos).then((function(t){t&&(e.initPositions(),e.pos.name="")})):this.$message.error("职位名称不能为空")},positionEdit:function(){var e=this;this.updatePos.name?this.putRequest("/system/basic/pos/",this.updatePos).then((function(t){t&&(e.initPositions(),e.dialogVisible=!1)})):this.$message.error("职位名称不能为空")},positionDelete:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.name+"】职位, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/pos/"+e.id).then((function(e){e&&t.initPositions()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))}}}),f=h,g=(n("b814"),Object(c["a"])(f,p,m,!1,null,null,null)),v=g.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"300px","margin-right":"8px"},attrs:{size:"small","prefix-icon":"el-icon-plus",placeholder:"添加职称..."},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.jlAdd(t)}},model:{value:e.jl.name,callback:function(t){e.$set(e.jl,"name",t)},expression:"jl.name"}}),n("el-select",{staticStyle:{"margin-right":"8px"},attrs:{placeholder:"职称级别",size:"small"},model:{value:e.jl.titleLevel,callback:function(t){e.$set(e.jl,"titleLevel",t)},expression:"jl.titleLevel"}},e._l(e.titleLevels,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.jlAdd}},[e._v("添加")])],1),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%"},attrs:{"element-loading-text":"正在获取数据...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},data:e.jls,stripe:"",border:"",size:"small"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"职称名称",width:"140"}}),n("el-table-column",{attrs:{prop:"titleLevel",label:"职称级别",width:"140"}}),n("el-table-column",{attrs:{prop:"createDate",label:"创建时间",width:"180"}}),n("el-table-column",{attrs:{label:"是否启用",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enabled?n("el-tag",{attrs:{type:"success",size:"small"}},[e._v("已启用")]):n("el-tag",{attrs:{type:"danger",size:"small"}},[e._v("未启用")])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.openEditDialog(t.row)}}},[e._v("编辑 ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.jlDelete(t.row)}}},[e._v("删除 ")])]}}])})],1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{icon:"el-icon-delete",type:"danger",size:"small",disabled:0==e.multipleSelection.length},on:{click:e.multipleDelete}},[e._v(" 批量删除 ")])],1),n("el-dialog",{attrs:{title:"修改职称",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("el-tag",[e._v("编号")]),n("el-input",{staticStyle:{width:"55px","margin-left":"8px"},attrs:{size:"small",disabled:""},model:{value:e.updateJl.id,callback:function(t){e.$set(e.updateJl,"id",t)},expression:"updateJl.id"}})],1),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tag",[e._v("职称名称")]),n("el-input",{staticStyle:{width:"200px","margin-left":"8px"},attrs:{size:"small"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.jlUpdate(t)}},model:{value:e.updateJl.name,callback:function(t){e.$set(e.updateJl,"name",t)},expression:"updateJl.name"}})],1),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tag",[e._v("职称级别")]),n("el-select",{staticStyle:{width:"200px","margin-left":"8px"},attrs:{size:"small"},model:{value:e.updateJl.titleLevel,callback:function(t){e.$set(e.updateJl,"titleLevel",t)},expression:"updateJl.titleLevel"}},e._l(e.titleLevels,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tag",[e._v("是否启用")]),n("el-switch",{staticStyle:{"margin-left":"8px"},model:{value:e.updateJl.enabled,callback:function(t){e.$set(e.updateJl,"enabled",t)},expression:"updateJl.enabled"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.jlUpdate}},[e._v("确 定")])],1)])],1)},y=[],x={name:"JobLevelManager",data:function(){return{loading:!1,jl:{name:"",titleLevel:""},updateJl:{id:"",name:"",titleLevel:"",enabled:!1},dialogVisible:!1,multipleSelection:[],jls:[],titleLevels:["正高级","副高级","中级","初级","员级"]}},mounted:function(){this.initJls()},methods:{initJls:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/joblevel/").then((function(t){e.loading=!1,t&&(e.jls=t)}))},jlAdd:function(){var e=this;this.jl.name?this.jl.titleLevel?this.postRequest("/system/basic/joblevel/",this.jl).then((function(t){t&&(e.initJls(),e.jl.name="",e.jl.titleLevel="")})):this.$message.error("请选择职称级别"):this.$message.error("职称名称不能为空")},jlDelete:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.name+"】职称, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/joblevel/"+e.id).then((function(e){e&&t.initJls()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},jlUpdate:function(){var e=this;this.updateJl.name?this.putRequest("/system/basic/joblevel/",this.updateJl).then((function(t){t&&(e.initJls(),e.dialogVisible=!1)})):this.$message.error("职称名称不能为空")},openEditDialog:function(e){Object.assign(this.updateJl,e),this.dialogVisible=!0},handleSelectionChange:function(e){this.multipleSelection=e},multipleDelete:function(){var e=this;this.$confirm("此操作将永久删除【"+this.multipleSelection.length+"】条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="?";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.deleteRequest("/system/basic/joblevel/"+t).then((function(t){t&&e.initJls()}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))}}},k=x,w=Object(c["a"])(k,b,y,!1,null,null,null),_=w.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"60%"}},[n("div",[n("el-tag",{staticStyle:{"margin-right":"10px"},attrs:{size:"normal"}},[e._v("奖惩类型")]),n("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择奖惩类型...",clearable:""},on:{change:e.initRps},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("el-option",{attrs:{label:"奖励",value:"1"}}),n("el-option",{attrs:{label:"惩罚",value:"0"}})],1)],1),n("div",[n("el-tag",{staticStyle:{"margin-right":"10px"},attrs:{size:"normal"}},[e._v("奖惩方式")]),n("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择奖惩方式...",clearable:""},on:{change:e.initRps},model:{value:e.way,callback:function(t){e.way=t},expression:"way"}},[n("el-option",{attrs:{label:"积分",value:"1"}}),n("el-option",{attrs:{label:"数额",value:"0"}})],1)],1),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddDialog}},[e._v("添加规则")])],1),n("div",{staticStyle:{"margin-top":"10px",width:"80%"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在获取数据...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"},height:"400px",data:e.rps,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"奖惩名称",width:"200"}}),n("el-table-column",{attrs:{label:"奖惩类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0==t.row.type?"惩罚":"奖励")+" ")]}}])}),n("el-table-column",{attrs:{label:"奖惩方式",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0==t.row.way?"数额":"积分")+" ")]}}])}),n("el-table-column",{attrs:{prop:"amount",label:"奖惩数额(元)",width:"100"}}),n("el-table-column",{attrs:{prop:"point",label:"奖惩积分(分)",width:"100"}}),n("el-table-column",{attrs:{prop:"createTime",label:"启用时间",width:"170"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.showEditDialog(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.deleteRp(t.row)}}},[e._v("删除")])]}}])})],1),n("el-button",{staticStyle:{"margin-top":"10px"},attrs:{disabled:0==e.multipleSelection.length,type:"danger",icon:"el-icon-delete"},on:{click:e.multipleDelete}},[e._v("批量删除 ")])],1),n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"rpForm",attrs:{rules:e.rules,model:e.rp}},[n("el-form-item",{attrs:{prop:"name"}},[n("el-tag",{attrs:{size:"normal"}},[e._v("奖惩名称")]),n("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请输入奖惩名称..."},model:{value:e.rp.name,callback:function(t){e.$set(e.rp,"name",t)},expression:"rp.name"}})],1),n("el-form-item",{attrs:{prop:"type"}},[n("el-tag",{attrs:{size:"normal"}},[e._v("奖惩类型")]),n("el-select",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请选择奖惩类型..."},model:{value:e.rp.type,callback:function(t){e.$set(e.rp,"type",t)},expression:"rp.type"}},[n("el-option",{attrs:{label:"奖励",value:1}}),n("el-option",{attrs:{label:"惩罚",value:0}})],1)],1),n("el-form-item",{attrs:{prop:"way"}},[n("el-tag",{attrs:{size:"normal"}},[e._v("奖惩方式")]),n("el-select",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请选择奖惩方式..."},model:{value:e.rp.way,callback:function(t){e.$set(e.rp,"way",t)},expression:"rp.way"}},[n("el-option",{attrs:{label:"积分",value:1},nativeOn:{click:function(t){e.rp.amount=null}}}),n("el-option",{attrs:{label:"数额",value:0},nativeOn:{click:function(t){e.rp.point=null}}})],1)],1),0==e.rp.way?n("el-form-item",{attrs:{prop:"amount"}},[n("el-tag",{attrs:{size:"normal"}},[e._v("奖惩数额")]),n("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请输入奖惩数额..."},model:{value:e.rp.amount,callback:function(t){e.$set(e.rp,"amount",t)},expression:"rp.amount"}})],1):e._e(),1==e.rp.way?n("el-form-item",{attrs:{prop:"point"}},[n("el-tag",{attrs:{size:"normal"}},[e._v("奖惩积分")]),n("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"请输入奖惩积分..."},model:{value:e.rp.point,callback:function(t){e.$set(e.rp,"point",t)},expression:"rp.point"}})],1):e._e()],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},R=[],$={name:"RewardPunishmentManager",data:function(){return{loading:!1,type:null,way:null,rps:[],dialogTitle:"",dialogVisible:!1,rp:{name:null,type:null,way:null,amount:null,point:null},rules:{name:[{required:!0,message:"请输入奖惩名称",trigger:"blur"}],type:[{required:!0,message:"请选择奖惩类型",trigger:"blur"}],way:[{required:!0,message:"请选择奖惩方式",trigger:"blur"}],amount:[{required:!0,message:"请输入奖惩数额",trigger:"blur"}],point:[{required:!0,message:"请输入奖惩积分",trigger:"blur"}]},multipleSelection:[]}},mounted:function(){this.initRps()},methods:{initRps:function(){var e=this;this.loading=!0;var t="";this.type&&(t+="type="+this.type+"&"),this.way&&(t+="way="+this.way),this.getRequest("/system/basic/rewardPunishment/?"+t).then((function(t){e.loading=!1,t&&(e.rps=t)}))},showAddDialog:function(){this.dialogTitle="添加规则",this.dialogVisible=!0,this.rp={name:null,type:null,way:null,amount:null,point:null}},showEditDialog:function(e){this.dialogTitle="修改规则",this.dialogVisible=!0,Object.assign(this.rp,e)},submitForm:function(){var e=this;this.$refs.rpForm.validate((function(t){t&&(e.rp.id?e.putRequest("/system/basic/rewardPunishment/",e.rp).then((function(t){t&&(e.initRps(),e.dialogVisible=!1)})):e.postRequest("/system/basic/rewardPunishment/",e.rp).then((function(t){t&&(e.initRps(),e.dialogVisible=!1)})))}))},deleteRp:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.name+"】奖惩规则, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/rewardPunishment/"+e.id).then((function(e){e&&t.initRps()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},handleSelectionChange:function(e){this.multipleSelection=e},multipleDelete:function(){var e=this;this.$confirm("此操作将永久删除【"+this.multipleSelection.length+"】条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="?";e.multipleSelection.forEach((function(e){t+="ids="+e.id+"&"})),e.deleteRequest("/system/basic/rewardPunishment/"+t).then((function(t){t&&e.initRps()}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))}}},j=$,P=Object(c["a"])(j,S,R,!1,null,"25aa29d2",null),z=P.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-input",{staticStyle:{width:"250px","margin-right":"8px"},attrs:{placeholder:"请输入角色英文名称...",size:"small"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2),n("el-input",{staticStyle:{width:"200px","margin-right":"8px"},attrs:{placeholder:"请输入角色中文名称...",size:"small"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addRole(t)}},model:{value:e.role.nameZh,callback:function(t){e.$set(e.role,"nameZh",t)},expression:"role.nameZh"}}),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.addRole}},[e._v("添加角色")])],1),n("div",{staticClass:"permissCollapse"},[n("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在获取数据...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",accordion:""},on:{change:e.getSelectedMenus},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.roles,(function(t,i){return n("el-collapse-item",{key:i,attrs:{title:t.nameZh,name:t.id}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("可访问的资源")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#ff0000"},attrs:{size:"normal",icon:"el-icon-delete",type:"text"},on:{click:function(n){return e.deleteRole(t)}}})],1),n("div",[n("el-tree",{key:i,ref:"tree",refInFor:!0,attrs:{data:e.allMenus,props:e.defaultProps,"show-checkbox":"","node-key":"id","default-checked-keys":e.selectedKeys}}),n("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"5px"}},[n("el-button",{on:{click:function(t){e.activeName=-1}}},[e._v("取消修改")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.updatePermiss(t.id,i)}}},[e._v("确认修改")])],1)],1)])],1)})),1)],1)])},D=[],q={name:"PermissManager",data:function(){return{loading:!1,role:{name:"",nameZh:""},roles:[],allMenus:[],defaultProps:{children:"children",label:"name"},activeName:-1,selectedKeys:[]}},mounted:function(){this.initRoles()},methods:{deleteRole:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.nameZh+"】角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/permiss/"+e.id).then((function(e){e&&t.initRoles()}))})).catch((function(){t.$message({type:"info",message:"已取消操作"})}))},addRole:function(){var e=this;this.role.name?this.role.nameZh?this.postRequest("/system/basic/permiss/",this.role).then((function(t){t&&(e.initRoles(),e.role.name="",e.role.nameZh="")})):this.$message.error("角色中文名称不能为空"):this.$message.error("角色英文名称不能为空")},initRoles:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/permiss/roles").then((function(t){e.loading=!1,t&&(e.roles=t)}))},initAllMenus:function(){var e=this;this.getRequest("/system/basic/permiss/menus").then((function(t){t&&(e.allMenus=t)}))},getSelectedMenus:function(e){var t=this;e&&(this.initAllMenus(),this.getRequest("/system/basic/permiss/mids/"+e).then((function(e){e&&(t.selectedKeys=e)})))},updatePermiss:function(e,t){var n=this,i=this.$refs.tree[t],l=i.getCheckedKeys(!0),a="";l.forEach((function(e){a+="&mids="+e})),this.putRequest("/system/basic/permiss/?rid="+e+a).then((function(e){e&&(n.activeName=-1)}))}}},E=q,O=(n("bab2"),Object(c["a"])(E,C,D,!1,null,null,null)),J=O.exports,N={name:"SysBasic",data:function(){return{activeName:"posmanager"}},components:{DepManager:d,PosManager:v,JobLevelManager:_,RewardPunishmentManager:z,PermissManager:J}},V=N,M=Object(c["a"])(V,i,l,!1,null,"1571756a",null);t["default"]=M.exports},a73a:function(e,t,n){"use strict";var i=n("e574"),l=n.n(i);l.a},b244:function(e,t,n){},b814:function(e,t,n){"use strict";var i=n("548a"),l=n.n(i);l.a},bab2:function(e,t,n){"use strict";var i=n("465a"),l=n.n(i);l.a},d1e3:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"success",icon:"el-icon-download",onclick:e.backupDatabase}},[e._v("备份数据库")])],1)},l=[],a={name:"SysData",data:function(){return{}},methods:{backupDatabase:function(){this.getRequest("/system/data/").then((function(e){}))}}},s=a,o=n("2877"),r=Object(o["a"])(s,i,l,!1,null,"a584467c",null);t["default"]=r.exports},e574:function(e,t,n){}}]);
//# sourceMappingURL=chunk-7eb81908.88fd06de.js.map